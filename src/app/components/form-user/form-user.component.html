<form [formGroup]="formUser" (ngSubmit)="createUser()">
  <mat-card>
    <mat-card-header>

      <mat-card-title>
        <p class="text-xl text-center my-4">Criando Usuário</p>
      </mat-card-title>

    </mat-card-header>

    <mat-card-content>
      <mat-form-field class="w-full">
        <mat-label>Nome</mat-label>
        <input matInput formControlName="nome" placeholder="Nome">
        @if (formUser.get('nome')) {
        <mat-error>Nome é obrigatório</mat-error>
        }
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" placeholder="Email">
        @if (formUser.get('email')) {
        <mat-error>Email é obrigatório</mat-error>
        }
      </mat-form-field>

      <mat-form-field class="w-full">
        <mat-label>Departamento</mat-label>
        <input matInput formControlName="departamentoId" type="text" [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          @for (option of filteredOptions | async; track option) {
            <mat-option [value]="option.id">{{option.nome}}</mat-option>
          }
        </mat-autocomplete>
        @if (formUser.get('departamento')) {
          <mat-error>Departamento é obrigatório</mat-error>
        }
      </mat-form-field>

    </mat-card-content>

    <mat-card-actions class="flex justify-end">
        <button type="button" class="bg-red-500 hover:bg-red-700 text-white py-3 px-4 my-3 mx-4 rounded-full" (click)="handleCloseModal()">
          Cancelar
        </button>
        <button type="submit" class="bg-green-500 hover:bg-green-700 text-white py-3 px-4 my-3 mx-4 rounded-full">
          Criar
        </button>
    </mat-card-actions>

  </mat-card>

</form>
